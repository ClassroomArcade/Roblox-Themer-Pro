<!DOCTYPE html>
<html>
<head>
  <title>Theme Store</title>
  <style>
    body { font-family: sans-serif; background: #0b0e11; color: white; padding: 40px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
    .item { background: #15191e; padding: 20px; border-radius: 12px; text-align: center; border: 1px solid #333; }
    .preview { height: 100px; border-radius: 8px; margin-bottom: 15px; }
    .buy-btn { background: #0084ff; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; width: 100%; }
    .buy-btn:disabled { background: #28a745; cursor: default; }
  </style>
</head>
<body>
  <h1>Theme Store</h1>
  <div class="grid" id="storeGrid"></div>
  <script>
    const themes = [
      {id: 'cyberpunk', name: 'Cyberpunk Red', color: '#ff0055'},
      {id: 'modern_dark', name: 'Black Glass', color: '#1a1a1a'},
      {id: 'ocean', name: 'Oceanic', color: '#0077be'}
    ];
    chrome.storage.local.get(['ownedThemes'], (data) => {
      const owned = data.ownedThemes || ['cyberpunk'];
      const grid = document.getElementById('storeGrid');
      themes.forEach(t => {
        const isOwned = owned.includes(t.id);
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <div class="preview" style="background:${t.color}"></div>
          <h3>${t.name}</h3>
          <button class="buy-btn" data-id="${t.id}" ${isOwned ? 'disabled' : ''}>${isOwned ? 'Claimed' : 'FREE'}</button>
        `;
        grid.appendChild(div);
      });
    });
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('buy-btn')) {
        const id = e.target.dataset.id;
        chrome.storage.local.get(['ownedThemes'], (data) => {
          const owned = data.ownedThemes || ['cyberpunk'];
          if (!owned.includes(id)) owned.push(id);
          chrome.storage.local.set({ownedThemes: owned}, () => { e.target.innerText = "Claimed"; e.target.disabled = true; });
        });
      }
    });
  </script>
</body>
</html>
